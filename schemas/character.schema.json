{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Character",
	"type": "object",
	"required": ["credentials", "settings", "stats", "mob"],
	"properties": {
		"version": {
			"type": "string",
			"description": "Project version when this character file was saved (semantic versioning format: major.minor.patch).",
			"pattern": "^\\d+\\.\\d+\\.\\d+$"
		},
		"credentials": {
			"type": "object",
			"description": "Account authentication and status information.",
			"required": [
				"characterId",
				"username",
				"passwordHash",
				"createdAt",
				"lastLogin",
				"isActive",
				"isBanned",
				"isAdmin"
			],
			"properties": {
				"characterId": {
					"type": "integer",
					"description": "Unique numeric identifier for the character."
				},
				"username": {
					"type": "string",
					"description": "Character's login username (must be unique)."
				},
				"passwordHash": {
					"type": "string",
					"description": "Hashed password for authentication (never store plain text)."
				},
				"createdAt": {
					"type": "string",
					"format": "date-time",
					"description": "ISO 8601 timestamp when the character account was created."
				},
				"lastLogin": {
					"type": "string",
					"format": "date-time",
					"description": "ISO 8601 timestamp of the character's most recent login."
				},
				"isActive": {
					"type": "boolean",
					"description": "Whether the character account is currently active and can log in."
				},
				"isBanned": {
					"type": "boolean",
					"description": "Whether the character account has been banned from the game."
				},
				"isAdmin": {
					"type": "boolean",
					"description": "Whether the character has administrator privileges."
				}
			},
			"additionalProperties": false
		},
		"settings": {
			"type": "object",
			"description": "User preferences and client configuration options.",
			"properties": {
				"receiveOOC": {
					"type": "boolean",
					"description": "Whether to receive Out-of-Character (OOC) channel messages."
				},
				"verboseMode": {
					"type": "boolean",
					"description": "If true, shows detailed descriptions. If false, shows brief descriptions."
				},
				"prompt": {
					"type": "string",
					"description": "Custom command prompt format string with color codes and variables."
				},
				"colorEnabled": {
					"type": "boolean",
					"description": "Whether ANSI color codes are enabled for this character's output."
				},
				"autoLook": {
					"type": "boolean",
					"description": "If true, automatically shows room description when entering a new room."
				},
				"briefMode": {
					"type": "boolean",
					"description": "If true, shows minimal room descriptions. If false, shows full descriptions."
				},
				"echoMode": {
					"type": "string",
					"description": "Echo mode setting (e.g., 'client', 'server') for command input display."
				},
				"defaultColor": {
					"type": "string",
					"description": "Default text color name used for this character's output (e.g., 'crimson', 'cyan', 'light blue')."
				},
				"channels": {
					"type": "array",
					"description": "List of channel names the character is subscribed to.",
					"items": { "type": "string" }
				},
				"blockedUsers": {
					"type": "array",
					"description": "List of usernames this character has blocked from communication.",
					"items": { "type": "string" }
				},
				"busyModeEnabled": {
					"type": "boolean",
					"description": "Whether busy mode is enabled. When enabled, messages from forwarded groups are queued instead of displayed immediately."
				},
				"combatBusyModeEnabled": {
					"type": "boolean",
					"description": "Whether combat busy mode is enabled. When enabled and the character is in combat, messages from forwarded groups are queued instead of displayed immediately."
				},
				"busyForwardedGroups": {
					"type": "array",
					"description": "List of message groups to forward to the answering machine when busy mode is active. Valid values: INFO, COMBAT, COMMAND_RESPONSE, SYSTEM, CHANNELS, ACTION, PROMPT.",
					"items": {
						"type": "string",
						"enum": [
							"INFO",
							"COMBAT",
							"COMMAND_RESPONSE",
							"SYSTEM",
							"CHANNELS",
							"ACTION",
							"PROMPT"
						]
					}
				},
				"combatBusyForwardedGroups": {
					"type": "array",
					"description": "List of message groups to forward to the answering machine when combat busy mode is active. Valid values: INFO, COMBAT, COMMAND_RESPONSE, SYSTEM, CHANNELS, ACTION, PROMPT.",
					"items": {
						"type": "string",
						"enum": [
							"INFO",
							"COMBAT",
							"COMMAND_RESPONSE",
							"SYSTEM",
							"CHANNELS",
							"ACTION",
							"PROMPT"
						]
					}
				},
				"autoloot": {
					"type": "boolean",
					"description": "If true, automatically loot all items from mob corpses when killing them."
				},
				"autosacrifice": {
					"type": "boolean",
					"description": "If true, automatically sacrifice mob corpses when killing them (destroying the corpse and giving 25% of its value as gold)."
				}
			},
			"additionalProperties": false
		},
		"stats": {
			"type": "object",
			"description": "Character statistics and achievements.",
			"properties": {
				"playtime": {
					"type": "integer",
					"minimum": 0,
					"description": "Total time played in seconds (must be at least 0)."
				},
				"deaths": {
					"type": "integer",
					"minimum": 0,
					"description": "Total number of times the character has died (must be at least 0)."
				},
				"kills": {
					"type": "integer",
					"minimum": 0,
					"description": "Total number of enemies the character has killed (must be at least 0)."
				}
			},
			"additionalProperties": false
		},
		"mob": {
			"type": "object",
			"description": "In-game character entity data (mob = mobile object).",
			"required": [
				"oid",
				"keywords",
				"display",
				"race",
				"job",
				"health",
				"mana"
			],
			"properties": {
				"oid": {
					"type": "integer",
					"description": "Object ID of the character's in-game entity."
				},
				"keywords": {
					"type": "string",
					"description": "Comma-separated keywords used to identify this character in commands."
				},
				"display": {
					"type": "string",
					"description": "Name displayed to other players when they see this character."
				},
				"location": {
					"type": "string",
					"description": "Current location reference in format '@dungeon{x,y,z}'."
				},
				"level": {
					"type": "integer",
					"minimum": 1,
					"description": "Character's current level (must be at least 1)."
				},
				"experience": {
					"type": "integer",
					"minimum": 0,
					"description": "Current experience points accumulated (must be at least 0)."
				},
				"race": {
					"type": "string",
					"description": "Race identifier (must match a race definition)."
				},
				"job": {
					"type": "string",
					"description": "Job/class identifier (must match a job definition)."
				},
				"health": {
					"type": "integer",
					"description": "Current hit points (can be negative when dead/dying)."
				},
				"mana": {
					"type": "integer",
					"description": "Current mana points available for spells and abilities."
				},
				"learnedAbilities": {
					"type": "object",
					"description": "Map of ability IDs to their mastery levels (0-100).",
					"additionalProperties": { "type": "integer", "minimum": 0 }
				}
			},
			"additionalProperties": true
		}
	},
	"additionalProperties": false
}
