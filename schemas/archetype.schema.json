{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Archetype File",
	"type": "object",
	"required": ["archetype"],
	"properties": {
		"archetype": {
			"type": "object",
			"required": ["id", "name", "description", "isStarter"],
			"properties": {
				"id": {
					"type": "string",
					"description": "Unique identifier for the archetype (e.g., 'human', 'warrior')."
				},
				"name": {
					"type": "string",
					"description": "Display name of the archetype shown to players."
				},
				"description": {
					"type": "string",
					"description": "Brief description of the archetype's characteristics and role."
				},
				"isStarter": {
					"type": "boolean",
					"description": "Whether this archetype can be selected as a starting option for new characters."
				},
				"startingAttributes": {
					"$ref": "#/definitions/primaryAttributes",
					"description": "Initial values for strength, agility, and intelligence at character creation."
				},
				"attributeGrowthPerLevel": {
					"$ref": "#/definitions/primaryAttributes",
					"description": "Amount each primary attribute increases per level gained."
				},
				"startingResourceCaps": {
					"$ref": "#/definitions/resourceCaps",
					"description": "Initial maximum health and mana values at character creation."
				},
				"resourceGrowthPerLevel": {
					"$ref": "#/definitions/resourceCaps",
					"description": "Amount maximum health and mana increase per level gained."
				},
				"abilities": {
					"type": "array",
					"description": "List of abilities available to this archetype with their starting levels.",
					"items": {
						"type": "object",
						"required": ["id", "level"],
						"properties": {
							"id": {
								"type": "string",
								"description": "Unique identifier of the ability."
							},
							"level": {
								"type": "integer",
								"minimum": 1,
								"description": "Starting level of the ability (minimum 1)."
							}
						},
						"additionalProperties": false
					}
				},
				"passives": {
					"type": "array",
					"description": "List of passive ability IDs granted by this archetype.",
					"items": { "type": "string" }
				},
				"growthModifier": {
					"type": "object",
					"description": "Multiplier affecting overall character growth rate.",
					"required": ["base", "perLevel"],
					"properties": {
						"base": {
							"type": "number",
							"description": "Base growth multiplier applied at all levels."
						},
						"perLevel": {
							"type": "number",
							"description": "Additional growth multiplier added per level."
						}
					},
					"additionalProperties": false
				},
				"damageRelationships": {
					"$ref": "#/definitions/damageRelationships",
					"description": "Damage type relationships defining resistances, immunities, and vulnerabilities. Keys and values should be lowercase (e.g., 'fire: resist'). They will be automatically uppercased during loading."
				}
			},
			"additionalProperties": false
		}
	},
	"additionalProperties": false,
	"definitions": {
		"primaryAttributes": {
			"type": "object",
			"properties": {
				"strength": {
					"type": "integer",
					"minimum": 0,
					"description": "Physical power attribute affecting melee damage and carrying capacity."
				},
				"agility": {
					"type": "integer",
					"minimum": 0,
					"description": "Dexterity attribute affecting accuracy, dodge chance, and movement speed."
				},
				"intelligence": {
					"type": "integer",
					"minimum": 0,
					"description": "Mental attribute affecting spell power, mana capacity, and skill learning."
				}
			},
			"additionalProperties": false
		},
		"resourceCaps": {
			"type": "object",
			"properties": {
				"maxHealth": {
					"type": "integer",
					"minimum": 0,
					"description": "Maximum hit points the character can have."
				},
				"maxMana": {
					"type": "integer",
					"minimum": 0,
					"description": "Maximum mana points available for casting spells and abilities."
				}
			},
			"additionalProperties": false
		},
		"damageRelationships": {
			"type": "object",
			"description": "Damage type relationships. Keys are damage types (lowercase), values are relationships (lowercase: 'resist', 'immune', or 'vulnerable'). Both will be uppercased during loading.",
			"patternProperties": {
				"^(slash|stab|crush|exotic|fire|ice|electric|water|radiant|necrotic|psychic|force|thunder|poison|acid)$": {
					"type": "string",
					"enum": ["resist", "immune", "vulnerable"],
					"description": "Damage relationship: 'resist' (50% damage), 'immune' (0% damage), or 'vulnerable' (200% damage)."
				}
			},
			"additionalProperties": false
		}
	}
}
